Î»da_demo{
    // Data Analyzer Demonstration Application in Anarchy Inference
    // This application analyzes datasets, generates statistics, and visualizes results
    
    Æ’main(){
        // Configuration
        ÏƒdataFile = "data/sample_data.csv";
        ÏƒoutputDir = "output";
        
        âŒ½("Anarchy Inference Data Analyzer Demo");
        âŒ½("Analyzing data from: " + dataFile);
        
        Ã·{
            // Create output directory if it doesn't exist
            Î¹(!?(outputDir)){
                âŒ½("Creating output directory: " + outputDir);
                !("mkdir -p " + outputDir);
            }
            
            // Load data from CSV file
            âŒ½("Loading data...");
            Ïƒcontent = ğŸ“–(dataFile);
            
            // Parse CSV data
            Î¾lines = content.split("\n");
            Î¾header = lines[0].split(",");
            Î¾data = âˆ…;
            
            // Process each line
            âˆ€(lines.slice(1), Ï†(line){
                Î¹(line.trim().length > 0){
                    Î¾fields = line.split(",");
                    Î¾row = âˆ…;
                    
                    âˆ€(header, Ï†(col, i){
                        row[col] = fields[i];
                    });
                    
                    ï¼‹(data, row);
                }
            });
            
            âŒ½("Loaded " + ğŸ”¤(data.length) + " records with " + ğŸ”¤(header.length) + " columns");
            
            // Identify numeric columns
            Î¾numericColumns = âˆ…;
            Î¾categoricalColumns = âˆ…;
            
            âˆ€(header, Ï†(column){
                Î¹(column === "id" || column === "value"){
                    ï¼‹(numericColumns, column);
                }Îµ{
                    ï¼‹(categoricalColumns, column);
                }
            });
            
            âŒ½("\nNumeric columns: " + numericColumns.join(", "));
            âŒ½("Categorical columns: " + categoricalColumns.join(", "));
            
            // Generate statistics for numeric columns
            Î¾numericStats = âˆ…;
            
            âˆ€(numericColumns, Ï†(column){
                Î¾values = data.map(Ï†(row){ âŸ¼(ğŸ”¢(row[column])); });
                Î¾sum = âˆ‘(values);
                Î¾avg = sum / values.length;
                
                // Calculate min and max
                Î¾sorted = values.sort(Ï†(a, b){ âŸ¼(a - b); });
                Î¾min = sorted[0];
                Î¾max = sorted[sorted.length - 1];
                
                // Calculate median
                Î¾median = 0;
                Î¹(sorted.length % 2 === 0){
                    Î¹midIdx = sorted.length / 2;
                    median = (sorted[midIdx - 1] + sorted[midIdx]) / 2;
                }Îµ{
                    Î¹midIdx = Math.floor(sorted.length / 2);
                    median = sorted[midIdx];
                }
                
                // Calculate standard deviation
                Î¾sumSquaredDiff = 0;
                âˆ€(values, Ï†(val){
                    Î¹diff = val - avg;
                    sumSquaredDiff += diff * diff;
                });
                Î¾stdDev = Math.sqrt(sumSquaredDiff / values.length);
                
                numericStats[column] = {
                    "count": values.length,
                    "sum": sum,
                    "min": min,
                    "max": max,
                    "avg": avg,
                    "median": median,
                    "stdDev": stdDev
                };
            });
            
            // Generate statistics for categorical columns
            Î¾categoricalStats = âˆ…;
            
            âˆ€(categoricalColumns, Ï†(column){
                Î¾frequency = âˆ…;
                
                âˆ€(data, Ï†(row){
                    Ïƒvalue = row[column];
                    Î¹(!frequency[value]){
                        frequency[value] = 0;
                    }
                    frequency[value]++;
                });
                
                categoricalStats[column] = {
                    "uniqueValues": Object.keys(frequency).length,
                    "frequency": frequency
                };
            });
            
            // Display numeric statistics
            âŒ½("\nNumeric Statistics:");
            âˆ€(Object.keys(numericStats), Ï†(column){
                Î¾stats = numericStats[column];
                âŒ½("\n  Column: " + column);
                âŒ½("    Count: " + ğŸ”¤(stats.count));
                âŒ½("    Sum: " + ğŸ”¤(stats.sum));
                âŒ½("    Min: " + ğŸ”¤(stats.min));
                âŒ½("    Max: " + ğŸ”¤(stats.max));
                âŒ½("    Average: " + ğŸ”¤(stats.avg.toFixed(2)));
                âŒ½("    Median: " + ğŸ”¤(stats.median.toFixed(2)));
                âŒ½("    Std Dev: " + ğŸ”¤(stats.stdDev.toFixed(2)));
            });
            
            // Display categorical statistics
            âŒ½("\nCategorical Statistics:");
            âˆ€(Object.keys(categoricalStats), Ï†(column){
                Î¾stats = categoricalStats[column];
                âŒ½("\n  Column: " + column);
                âŒ½("    Unique Values: " + ğŸ”¤(stats.uniqueValues));
                âŒ½("    Frequency Distribution:");
                
                âˆ€(Object.keys(stats.frequency), Ï†(value){
                    Î¹count = stats.frequency[value];
                    Î¹percentage = (count / data.length * 100).toFixed(1);
                    âŒ½("      " + value + ": " + ğŸ”¤(count) + " (" + percentage + "%)");
                });
            });
            
            // Generate correlation matrix for numeric columns
            Î¹(numericColumns.length > 1){
                âŒ½("\nCorrelation Matrix:");
                
                Î¾correlationMatrix = âˆ…;
                
                âˆ€(numericColumns, Ï†(col1){
                    correlationMatrix[col1] = âˆ…;
                    
                    âˆ€(numericColumns, Ï†(col2){
                        Î¹(col1 === col2){
                            correlationMatrix[col1][col2] = 1.0;
                        }Îµ{
                            Î¾values1 = data.map(Ï†(row){ âŸ¼(ğŸ”¢(row[col1])); });
                            Î¾values2 = data.map(Ï†(row){ âŸ¼(ğŸ”¢(row[col2])); });
                            
                            correlationMatrix[col1][col2] = calculateCorrelation(values1, values2);
                        }
                    });
                });
                
                // Display correlation matrix
                âŒ½("    " + numericColumns.join("\t"));
                âˆ€(numericColumns, Ï†(col1){
                    Ïƒrow = col1;
                    âˆ€(numericColumns, Ï†(col2){
                        row += "\t" + correlationMatrix[col1][col2].toFixed(2);
                    });
                    âŒ½("    " + row);
                });
            }
            
            // Save results to JSON file
            Î¾results = {
                "dataFile": dataFile,
                "recordCount": data.length,
                "columns": header,
                "numericStats": numericStats,
                "categoricalStats": categoricalStats
            };
            
            ÏƒjsonResults = â‹.stringify(results, null, 2);
            âœ(outputDir + "/analysis_results.json", jsonResults);
            âŒ½("\nResults saved to " + outputDir + "/analysis_results.json");
            
            // Generate summary report
            Ïƒreport = "# Data Analysis Report\n\n";
            report += "## Dataset Overview\n\n";
            report += "- **File**: " + dataFile + "\n";
            report += "- **Records**: " + ğŸ”¤(data.length) + "\n";
            report += "- **Columns**: " + header.join(", ") + "\n\n";
            
            report += "## Numeric Statistics\n\n";
            âˆ€(Object.keys(numericStats), Ï†(column){
                Î¾stats = numericStats[column];
                report += "### " + column + "\n\n";
                report += "- Count: " + ğŸ”¤(stats.count) + "\n";
                report += "- Sum: " + ğŸ”¤(stats.sum) + "\n";
                report += "- Min: " + ğŸ”¤(stats.min) + "\n";
                report += "- Max: " + ğŸ”¤(stats.max) + "\n";
                report += "- Average: " + ğŸ”¤(stats.avg.toFixed(2)) + "\n";
                report += "- Median: " + ğŸ”¤(stats.median.toFixed(2)) + "\n";
                report += "- Std Dev: " + ğŸ”¤(stats.stdDev.toFixed(2)) + "\n\n";
            });
            
            report += "## Categorical Statistics\n\n";
            âˆ€(Object.keys(categoricalStats), Ï†(column){
                Î¾stats = categoricalStats[column];
                report += "### " + column + "\n\n";
                report += "- Unique Values: " + ğŸ”¤(stats.uniqueValues) + "\n";
                report += "- Frequency Distribution:\n\n";
                
                âˆ€(Object.keys(stats.frequency), Ï†(value){
                    Î¹count = stats.frequency[value];
                    Î¹percentage = (count / data.length * 100).toFixed(1);
                    report += "  - " + value + ": " + ğŸ”¤(count) + " (" + percentage + "%)\n";
                });
                report += "\n";
            });
            
            âœ(outputDir + "/analysis_report.md", report);
            âŒ½("Report saved to " + outputDir + "/analysis_report.md");
            
            âŸ¼(âŠ¤);
        }{
            âŒ½("Error in data analyzer: " + âš .message);
            âŸ¼(âŠ¥);
        }
    }
    
    // Helper function to calculate correlation between two arrays
    Æ’calculateCorrelation(Î¾array1, Î¾array2){
        Î¹(array1.length !== array2.length){
            âŸ¼(0);
        }
        
        Î¹n = array1.length;
        Î¹sum1 = âˆ‘(array1);
        Î¹sum2 = âˆ‘(array2);
        Î¹mean1 = sum1 / n;
        Î¹mean2 = sum2 / n;
        
        Î¹sum1Sq = âˆ‘(array1.map(Ï†(val){ âŸ¼(val * val); }));
        Î¹sum2Sq = âˆ‘(array2.map(Ï†(val){ âŸ¼(val * val); }));
        
        Î¹pSum = 0;
        âˆ€(array1, Ï†(val, i){
            pSum += val * array2[i];
        });
        
        Î¹num = pSum - (sum1 * sum2 / n);
        Î¹den = Math.sqrt((sum1Sq - sum1 * sum1 / n) * (sum2Sq - sum2 * sum2 / n));
        
        Î¹(den === 0){
            âŸ¼(0);
        }
        
        âŸ¼(num / den);
    }
}
